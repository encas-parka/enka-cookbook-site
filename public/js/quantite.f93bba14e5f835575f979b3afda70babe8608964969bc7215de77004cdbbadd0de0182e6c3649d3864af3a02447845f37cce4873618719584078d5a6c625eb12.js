(()=>{var o=document.querySelector("#quantityInput"),s=document.getElementById("quantityInit").textContent,f=document.getElementById("quantityDefined"),a=document.querySelectorAll(".amount"),l=[],c=[];Array.from(a).forEach(function(t,n){let i=t.parentElement.querySelector(".unit"),r=i?i.textContent:"",e=Number(t.innerText),u=r;r==="Kg"?(e=e*1e3,u="gr."):r==="l."&&(e=e*1e3,u="ml"),l.push(e),c.push({baseValue:e,baseUnit:u,originalUnit:r})});o.addEventListener("keydown",function(t){if(t.keyIdentifier=="U+000A"||t.keyIdentifier=="Enter"||t.keyCode==13)return t.preventDefault(),!1},!0);function d(t,n){if(!n)return Math.round(t*10)/10;switch(n){case"l.":case"Kg":return Math.round(t*100)/100;case"ml":case"gr.":return Math.round(t);default:return Math.round(t*10)/10}}function m(t,n){return n==="gr."?t>=1e3?{qty:t/1e3,unit:"Kg"}:{qty:t,unit:"gr."}:n==="ml"?t>=1e3?{qty:t/1e3,unit:"l."}:{qty:t,unit:"ml"}:{qty:t,unit:n}}o.addEventListener("input",function(){l.forEach((t,n)=>{let i=a[n].parentElement.querySelector(".unit"),r=c[n],e=t*o.value/s,u=m(e,r.baseUnit);a[n].innerHTML=d(u.qty,u.unit),i&&(i.textContent=u.unit)}),f.textContent=o.value});})();
