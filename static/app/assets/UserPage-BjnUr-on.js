import{d as Me,J as Ue,I as b,A as i,y as p,v as w,h as s,g as r,K as G,m as e,u as H,w as te,S as re,T as _,b as g,c as ke,G as ze,x as Ae,V as le,O as ie,B as Ee,o as t,C as m,W as h}from"./appwrite-_5e16uFI.js";import{H as Ce,c as oe,b as J,Z as qe,_ as de}from"./icons-BII4FnZr.js";var Le=w('<span class="loading loading-spinner loading-sm"></span>'),Se=w('<div class="label text-error"><span class="label-text-alt"> </span></div>'),Be=w('<span class="loading loading-spinner loading-sm"></span>'),De=w(`<div class="container mx-auto max-w-2xl p-4"><div class="mb-6 flex items-center gap-4"><button class="btn btn-ghost btn-circle btn-sm" aria-label="Retour au tableau de bord"><!></button> <h1 class="text-2xl font-bold">Mon compte</h1></div> <section class="card bg-base-100 mb-6 shadow-xl"><div class="card-body"><h2 class="card-title mb-4 flex items-center gap-2"><!> Modifier le nom d'utilisateur</h2> <form><label class="input input-bordered flex items-center gap-2"><!> <input type="text" placeholder="Nouveau nom d'utilisateur" required maxlength="25"/></label> <div class="card-actions mt-4 justify-end"><button type="submit" class="btn btn-primary"><!> Mettre à jour</button></div></form></div></section> <section class="card bg-base-100 shadow-xl"><div class="card-body"><h2 class="card-title mb-4 flex items-center gap-2"><!> Modifier le mot de passe</h2> <form><fieldset class="fieldset mb-4"><legend class="fieldset-legend">Ancien mot de passe</legend> <label class="input input-bordered flex items-center gap-2"><!> <input type="password" placeholder="Entrez votre ancien mot de passe" required/></label></fieldset> <fieldset class="fieldset mb-4"><legend class="fieldset-legend">Nouveau mot de passe</legend> <label class="input input-bordered flex items-center gap-2"><!> <input type="password" placeholder="Nouveau mot de passe (min. 8 caractères)" required/></label></fieldset> <fieldset class="fieldset mb-4"><legend class="fieldset-legend">Confirmer le nouveau mot de passe</legend> <label class="input input-bordered flex items-center gap-2"><!> <input type="password" placeholder="Confirmez le nouveau mot de passe" required/></label> <!></fieldset> <div class="card-actions justify-end"><button type="submit" class="btn btn-primary"><!> Mettre à jour</button></div></form></div></section></div>`);function Ge(ne,ce){Me(ce,!0);let n=p(""),c=p(!1),v=p(""),d=p(""),u=p(""),o=p(!1);const O=H(()=>e(n).trim()!==""&&e(n).trim()!==b.userName),R=H(()=>e(v)!==""&&e(d)!==""&&e(u)!==""),f=H(()=>e(d)!==e(u)?"Les mots de passe ne correspondent pas":e(d).length<8?"Le mot de passe doit contenir au moins 8 caractères":null);Ue(()=>{b.userName&&i(n,b.userName,!0)});async function ue(a){if(a.preventDefault(),!(!e(O)||e(c))){i(c,!0);try{const{account:l}=await le();await ie.track(l.updateName(e(n).trim()),{loading:"Mise à jour du nom d'utilisateur...",success:"Nom d'utilisateur mis à jour avec succès",error:"Erreur lors de la mise à jour du nom d'utilisateur"}),await b.refreshAuthAfterLogin()}catch(l){console.error("[UserPage] Erreur lors de la mise à jour du nom:",l)}finally{i(c,!1)}}}async function pe(a){if(a.preventDefault(),!(!e(R)||e(o)||e(f))){i(o,!0);try{const{account:l}=await le();await ie.track(l.updatePassword(e(d),e(v)),{loading:"Mise à jour du mot de passe...",success:"Mot de passe mis à jour avec succès",error:"Erreur lors de la mise à jour du mot de passe"}),i(v,""),i(d,""),i(u,"")}catch(l){console.error("[UserPage] Erreur lors de la mise à jour du mot de passe:",l)}finally{i(o,!1)}}}function ve(){ze("/dashboard")}var y=De(),x=s(y),j=s(x);j.__click=ve;var me=s(j);Ce(me,{size:20}),t(j),m(2),t(x);var N=r(x,2),T=s(N),P=s(T),fe=s(P);oe(fe,{size:20}),m(),t(P);var M=r(P,2),U=s(M),V=s(U);oe(V,{class:"h-4 w-4 opacity-50"});var k=r(V,2);h(k),t(U);var W=r(U,2),z=s(W),be=s(z);{var _e=a=>{var l=Le();g(a,l)},ge=a=>{de(a,{size:16})};G(be,a=>{e(c)?a(_e):a(ge,!1)})}m(),t(z),t(W),t(M),t(T),t(N);var Z=r(N,2),F=s(Z),A=s(F),he=s(A);J(he,{size:20}),m(),t(A);var E=r(A,2),C=s(E),Q=r(s(C),2),X=s(Q);qe(X,{class:"h-4 w-4 opacity-50"});var q=r(X,2);h(q),t(Q),t(C);var L=r(C,2),Y=r(s(L),2),$=s(Y);J($,{class:"h-4 w-4 opacity-50"});var S=r($,2);h(S),t(Y),t(L);var B=r(L,2),D=r(s(B),2),ee=s(D);J(ee,{class:"h-4 w-4 opacity-50"});var I=r(ee,2);h(I),t(D);var we=r(D,2);{var ye=a=>{var l=Se(),se=s(l),Pe=s(se,!0);t(se),t(l),te(()=>Ae(Pe,e(f))),g(a,l)};G(we,a=>{e(f)&&e(u)!==""&&a(ye)})}t(B);var ae=r(B,2),K=s(ae),xe=s(K);{var je=a=>{var l=Be();g(a,l)},Ne=a=>{de(a,{size:16})};G(xe,a=>{e(o)?a(je):a(Ne,!1)})}m(),t(K),t(ae),t(E),t(F),t(Z),t(y),te(()=>{k.disabled=e(c),z.disabled=!e(O)||e(c),q.disabled=e(o),S.disabled=e(o),I.disabled=e(o),K.disabled=!e(R)||e(o)||!!e(f)}),re("submit",M,ue),_(k,()=>e(n),a=>i(n,a)),re("submit",E,pe),_(q,()=>e(v),a=>i(v,a)),_(S,()=>e(d),a=>i(d,a)),_(I,()=>e(u),a=>i(u,a)),g(ne,y),ke()}Ee(["click"]);export{Ge as default};
