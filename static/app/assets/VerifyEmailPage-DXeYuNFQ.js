import{d as O,X as S,F as I,A as c,y as P,a8 as U,I as X,G as E,v as x,K as V,m as b,h as r,P as H,b as l,c as J,j as L,k as T,g as m,w as C,x as j,B as N,C as Q,o as s}from"./appwrite-BSIYiA2M.js";import{a as W}from"./index-BFQ8GO35.js";import{g as Y,n as Z,C as $}from"./icons-CuLSGxOa.js";var ee=x('<div class="flex flex-col items-center gap-4 text-center"><!> <h2 class="text-2xl font-bold">Vérification en cours...</h2> <p class="text-base-content/70">Veuillez patienter pendant que nous vérifions votre email.</p></div>'),te=x('<div class="flex flex-col items-center gap-4 text-center"><!> <h2 class="text-success text-2xl font-bold">Email vérifié !</h2> <p class="text-base-content/70"> </p> <button class="btn btn-primary">Aller au tableau de bord</button></div>'),ae=x(`<div class="flex flex-col items-center gap-4 text-center"><!> <h2 class="text-error text-2xl font-bold">Erreur de vérification</h2> <p class="text-base-content/70"> </p> <div class="flex gap-2"><button class="btn btn-outline">Retour à l'accueil</button> <button class="btn btn-primary">Tableau de bord</button></div></div>`),re=x('<div class="bg-base-200 flex min-h-screen items-center justify-center p-4"><div class="bg-base-100 max-w-md rounded-xl p-8 shadow-lg"><!></div></div>');function ne(q,D){O(D,!0);let i=P("loading"),v=P("");S(async()=>{const e=I.search.userId,t=I.search.secret;if(!e||!t){c(i,"error"),c(v,"Paramètres de vérification manquants. Vérifiez le lien dans l'email.");return}try{const{account:a}=await U(()=>import("./appwrite-BSIYiA2M.js").then(d=>d.b8),[]).then(d=>d.getAppwriteInstances());await a.updateEmailVerification({userId:e,secret:t}),await X.refreshAuthAfterLogin(),c(i,"success"),c(v,"Votre email a été vérifié avec succès ! Vous allez être redirigé..."),setTimeout(()=>{E("/dashboard")},2e3)}catch(a){console.error("Erreur lors de la vérification:",a),c(i,"error"),c(v,a instanceof Error?a.message:"Une erreur est survenue lors de la vérification. Le lien a peut-être expiré.",!0)}});function k(){E("/dashboard")}var g=re(),h=r(g),M=r(h);{var R=e=>{var t=ee(),a=r(t);Y(a,{class:"text-primary size-16 animate-spin"}),Q(4),s(t),l(e,t)},B=e=>{var t=L(),a=T(t);{var d=o=>{var n=te(),p=r(n);Z(p,{class:"text-success size-16"});var u=m(p,4),f=r(u,!0);s(u);var _=m(u,2);_.__click=k,s(n),C(()=>j(f,b(v))),l(o,n)},F=o=>{var n=L(),p=T(n);{var u=f=>{var _=ae(),w=r(_);$(w,{class:"text-error size-16"});var y=m(w,4),G=r(y,!0);s(y);var z=m(y,2),A=r(z);A.__click=()=>E("/");var K=m(A,2);K.__click=k,s(z),s(_),C(()=>j(G,b(v))),l(f,_)};V(p,f=>{b(i)==="error"&&f(u)},!0)}l(o,n)};V(a,o=>{b(i)==="success"?o(d):o(F,!1)},!0)}l(e,t)};V(M,e=>{b(i)==="loading"?e(R):e(B,!1)})}s(h),s(g),H(1,h,()=>W),l(q,g),J()}N(["click"]);export{ne as default};
